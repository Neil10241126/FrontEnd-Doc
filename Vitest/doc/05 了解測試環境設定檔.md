# 05 äº†è§£æ¸¬è©¦ç’°å¢ƒè¨­å®šæª”

---

## ğŸ”—ä½¿ç”¨ Vitest.config.js è¨­å®š

è‹¥å°ˆæ¡ˆè¦æ¨¡é¾å¤§ï¼Œæ‰€ä½¿ç”¨çš„å¥—ä»¶è¼ƒå¤šï¼Œéœ€è¦å°‡æ¸¬è©¦ç’°å¢ƒçš„è¨­å®šéš”é›¢é–‹ä¾†ï¼Œå°±éœ€è¦åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹å»ºç«‹ **`vitest.config.js`** æª”æ¡ˆã€‚

```js
// vitest.config.js
import {  defineConfig } from 'vitest/config'

export default defineConfig({
  // åŸå…ˆé–‹ç™¼ç’°å¢ƒè¨­å®š
  test: {
    // æ¬²åŠ å…¥çš„æ¸¬è©¦ç’°å¢ƒè¨­å®š
    
    },
  }
)
```

è‹¥æƒ³ä»¥ **`vitest.config.js`** æª”ä¾†éš”é›¢æ¸¬è©¦ç’°å¢ƒè¨­å®šï¼Œåˆæƒ³åˆä½µé–‹ç™¼ç’°å¢ƒåŸæœ‰çš„è¨­å®šï¼Œé€™æ™‚é€éviteæ¨¡çµ„çš„ **`mergeConfig`** å‡½å¼ä¾†é”æˆã€‚

```js
// vitest.config.js
import { mergeConfig } from 'vite'
import { defineConfig } from 'vitest/config'
import viteConfig from './vite.config' // vite è¨­å®šæª”

export default mergeConfig(
  viteConfig,
  defineConfig({
    test: {
      // åœ¨é€™è£¡åŠ å…¥æ¸¬è©¦è¨­å®š
      
    }
  })
)
```

## ğŸ”—æ¸¬è©¦è¨­å®šå¸¸ç”¨æ¬„ä½

### 1. include : 

æ‰€æœ‰è·¯å¾‘åº•ä¸‹å‰¯æª”ååŒ…å« **`test`**ã€**`spec`** çš„æ‰€æœ‰ **`js, mjs, cjs, ts, mts, jsx, tsx`** çš„æª”æ¡ˆéƒ½éœ€è¦é€²è¡Œæ¸¬è©¦ã€‚ 

```js
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    include: ["**/*.{test,spec}.{js,mjs,cjs,ts,mts,jsx,tsx}"],
    // å°ˆæ¡ˆä¸‹æœ‰ä»¥ä¸Šå­—å°¾é™„æª”åçš†æœƒé€²è¡Œæ¸¬è©¦ã€‚
  }
})
```

### 2. exclude :

æ’é™¤éœ€è¦æ¸¬è©¦çš„æª”æ¡ˆï¼Œé è¨­å€¼å·²ç¶“æ’é™¤ **`node_modulesã€distã€cypress`** é¿å…å’Œ include åŒæ™‚åŒ…å«ç›¸åŒæª”æ¡ˆï¼Œä¸ç„¶æœƒæ‰¾ä¸åˆ°ä»»ä½•æ¸¬è©¦æª”æ¡ˆã€‚

### 3. globals :

é–‹å•Ÿæ™‚æœƒé è¨­å¼•å…¥ **`describeã€itã€expect`** ä¸å¿…å†æ‰‹å‹• import å¼•å…¥ã€‚

**`âš ï¸ESLint æœƒæé†’æœªè¢«å¼•ç”¨çš„ç›¸é—œåŠŸèƒ½ï¼Œé€™æ™‚å€™éœ€è¦å° ESLint åšé¡å¤–è™•ç†ã€‚`** 

#### Step1 : å®‰è£ eslint-plugin-vitest-globals

```bash
npm install -D eslint-plugin-vitest-globals
```

#### Step2 : .eslintrc.cjs è¨­å®š

åœ¨ `extends`ã€`env` æ¬„ä½ä¸­ï¼ŒåŠ å…¥é—œæ–¼ Vitest Globals ç›¸é—œè¨­å®šï¼Œå¦‚æ­¤ä¸€ä¾†å°±èƒ½æ­£å¸¸ä½¿ç”¨ `global` åŠŸèƒ½ã€‚

```js
// eslintrc.cjs
module.exports = {
  // åŸå…ˆå…¶ä»–è¨­å®š
  extends: [
    'plugin:vitest-globals/recommended',
    // åŸå…ˆå…¶ä»–è¨­å®š
  ],
  env: {
    'vitest-globals/env': true
  },
  // åŸå…ˆå…¶ä»–è¨­å®š
}
```

### 4. environment :

æ¸¬è©¦ç’°å¢ƒä¸­çš„æ¨¡æ“¬ç’°å¢ƒï¼ŒVitest é è¨­ç’°å¢ƒæ˜¯ `Node.js`ï¼Œè‹¥è¦æ¸¬è©¦ç€è¦½å™¨çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå‰‡æœƒæŒ‡å®š `jsdom` ä¾†æ¨¡æ“¬é–‹ç™¼è€…ç’°å¢ƒã€‚

```js
// vitest.config.js
import {  defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    environment: "jsdom",
    
    },
  }
)
```